local Spectate = Instance.new("ScreenGui")
Spectate.Name = "Spectate"
Spectate.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local BottomBar = Instance.new("Frame")
BottomBar.Name = "BottomBar"
BottomBar.Visible = false
BottomBar.Size = UDim2.new(0.5368917, 0, 0.1312336, 0)
BottomBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
BottomBar.BackgroundTransparency = 0.5
BottomBar.Position = UDim2.new(0.2313818, 0, 0.7825637, 0)
BottomBar.BorderSizePixel = 0
BottomBar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
BottomBar.Parent = Spectate

local Previous = Instance.new("ImageButton")
Previous.Name = "Previous"
Previous.Size = UDim2.new(0.1154971, 0, 0.79, 0)
Previous.BorderColor3 = Color3.fromRGB(0, 0, 0)
Previous.Position = UDim2.new(0.0342936, 0, 0.1, 0)
Previous.BorderSizePixel = 0
Previous.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Previous.Image = "rbxassetid://13539001291"
Previous.Parent = BottomBar

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0.1, 0)
UICorner.Parent = Previous

local TextLabel = Instance.new("TextLabel")
TextLabel.Size = UDim2.new(0.5643274, 0, 0.79, 0)
TextLabel.BorderColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.Position = UDim2.new(0.218143, 0, 0.1, 0)
TextLabel.BorderSizePixel = 0
TextLabel.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.FontSize = Enum.FontSize.Size60
TextLabel.TextSize = 57
TextLabel.TextColor3 = Color3.fromRGB(0, 0, 0)
TextLabel.Text = "Placeholder"
TextLabel.TextWrapped = true
TextLabel.TextWrap = true
TextLabel.Font = Enum.Font.SourceSans
TextLabel.TextScaled = true
TextLabel.Parent = BottomBar

local UITextSizeConstraint = Instance.new("UITextSizeConstraint")
UITextSizeConstraint.MaxTextSize = 57
UITextSizeConstraint.Parent = TextLabel

local LocalScript = Instance.new("LocalScript")
LocalScript.Source = "--first run\nlocal LocalPlayer = game.Players.LocalPlayer\nscript.Parent.Text = LocalPlayer.DisplayName..\" (@\"..LocalPlayer.Name..\")\""
LocalScript.Parent = TextLabel

local Next = Instance.new("ImageButton")
Next.Name = "Next"
Next.Size = UDim2.new(0.1154971, 0, 0.79, 0)
Next.BorderColor3 = Color3.fromRGB(0, 0, 0)
Next.Position = UDim2.new(0.8573388, 0, 0.1, 0)
Next.BorderSizePixel = 0
Next.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
Next.Image = "rbxassetid://13539001498"
Next.Parent = BottomBar

local UICorner1 = Instance.new("UICorner")
UICorner1.CornerRadius = UDim.new(0.1, 0)
UICorner1.Parent = Next

local PlayerListFrame = Instance.new("ScrollingFrame")
PlayerListFrame.Name = "PlayerListFrame"
PlayerListFrame.Visible = false
PlayerListFrame.Size = UDim2.new(0.2072213, 0, 0.6089239, 0)
PlayerListFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
PlayerListFrame.BackgroundTransparency = 0.5
PlayerListFrame.Position = UDim2.new(0.0089071, 0, 0.195538, 0)
PlayerListFrame.Active = true
PlayerListFrame.BorderSizePixel = 0
PlayerListFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
PlayerListFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
PlayerListFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
PlayerListFrame.ScrollBarImageColor3 = Color3.fromRGB(0, 0, 0)
PlayerListFrame.Parent = Spectate

local UIListLayout = Instance.new("UIListLayout")
UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.ItemLineAlignment = Enum.ItemLineAlignment.End
UIListLayout.Padding = UDim.new(0, 5)
UIListLayout.Parent = PlayerListFrame

local OpenCloseToggle = Instance.new("TextButton")
OpenCloseToggle.Name = "OpenCloseToggle"
OpenCloseToggle.Size = UDim2.new(0.1287284, 0, 0.0487339, 0)
OpenCloseToggle.BorderColor3 = Color3.fromRGB(0, 0, 0)
OpenCloseToggle.Position = UDim2.new(0.4435134, 0, 0.9512662, 0)
OpenCloseToggle.BorderSizePixel = 0
OpenCloseToggle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
OpenCloseToggle.FontSize = Enum.FontSize.Size14
OpenCloseToggle.TextSize = 14
OpenCloseToggle.TextColor3 = Color3.fromRGB(0, 0, 0)
OpenCloseToggle.Text = "Spectate"
OpenCloseToggle.TextWrapped = true
OpenCloseToggle.TextWrap = true
OpenCloseToggle.Font = Enum.Font.SourceSans
OpenCloseToggle.TextScaled = true
OpenCloseToggle.Parent = Spectate

local LocalScript1 = Instance.new("LocalScript")
LocalScript1.Source = "local LocalPlayer = game.Players.LocalPlayer\nlocal cam = workspace.CurrentCamera\nlocal Players = game:GetService(\"Players\")\nlocal playerList = Players:GetPlayers()\nlocal position = 1\n\nlocal function highlightCurrentPlayer(playerName)\n\tfor _, child in pairs(script.Parent.PlayerListFrame:GetChildren()) do\n\t\tif child:IsA(\"TextButton\") then\n\t\t\tif child.Name == playerName then\n\t\t\t\tchild.BackgroundColor3 = Color3.fromRGB(255, 255, 0)  -- Highlight color\n\t\t\telse\n\t\t\t\tchild.BackgroundColor3 = Color3.fromRGB(255, 255, 255)  -- Default color\n\t\t\tend\n\t\tend\n\tend\nend\n\nlocal function updateCamera(playerObject)\n\tcam.CameraSubject = playerObject.Character\n\tscript.Parent.BottomBar.TextLabel.Text = playerObject.DisplayName..\" (@\"..playerObject.Name..\")\"\n\thighlightCurrentPlayer(playerObject.Name)\n\n\t-- Listen for the CharacterAdded event to update the camera when the player respawns\n\tplayerObject.CharacterAdded:Connect(function(character)\n\t\tcam.CameraSubject = character\n\tend)\nend\n\nlocal function clearPlayerListFrame()\n\tfor _, child in pairs(script.Parent.PlayerListFrame:GetChildren()) do\n\t\tif child:IsA(\"TextButton\") then\n\t\t\tchild:Destroy()\n\t\tend\n\tend\nend\n\nlocal function updatePlayerList()\n\tplayerList = Players:GetPlayers()\n\tclearPlayerListFrame()\n\n\tfor i, v in pairs(playerList) do\n\t\tlocal PlayerListFrameItem = script.ListTemplate:Clone()\n\t\tPlayerListFrameItem.Name = v.Name\n\t\tPlayerListFrameItem.Parent = script.Parent.PlayerListFrame\n\t\tPlayerListFrameItem.Text = v.DisplayName..\" (@\"..v.Name..\")\"\n\t\tPlayerListFrameItem.MouseButton1Click:Connect(function()\n\t\t\tposition = i\n\t\t\tupdateCamera(v)\n\t\tend)\n\tend\nend\n\n-- Handle player leaving to update camera if necessary\nlocal function handlePlayerRemoving(player)\n\tif playerList[position] == player then\n\t\tposition = (position % #playerList) + 1\n\t\tupdateCamera(playerList[position])\n\tend\n\tupdatePlayerList()\nend\n\n-- Initial population of the player list\nupdatePlayerList()\n\n-- Update the player list when a player joins or leaves\nPlayers.PlayerAdded:Connect(updatePlayerList)\nPlayers.PlayerRemoving:Connect(handlePlayerRemoving)\n\nscript.Parent.BottomBar.Previous.MouseButton1Click:Connect(function()\n\tposition = (position - 1 < 1) and #playerList or (position - 1)\n\tupdateCamera(playerList[position])\nend)\n\nscript.Parent.BottomBar.Next.MouseButton1Click:Connect(function()\n\tposition = (position + 1 > #playerList) and 1 or (position + 1)\n\tupdateCamera(playerList[position])\nend)\n\n-- Open/Close toggle button\nscript.Parent.OpenCloseToggle.MouseButton1Click:Connect(function()\n\tif script.Parent.OpenCloseToggle.Text == \"Spectate\" then\n\t\tscript.Parent.OpenCloseToggle.Text = \"Exit\"\n\t\tscript.Parent.OpenCloseToggle.BackgroundColor3 = Color3.fromRGB(255, 0, 4)\n\n\t\tscript.Parent.BottomBar.Visible = true\n\t\tscript.Parent.PlayerListFrame.Visible = true\n\telseif script.Parent.OpenCloseToggle.Text == \"Exit\" then\n\t\tscript.Parent.OpenCloseToggle.Text = \"Spectate\"\n\t\tscript.Parent.OpenCloseToggle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)\n\n\t\tscript.Parent.BottomBar.Visible = false\n\t\tscript.Parent.PlayerListFrame.Visible = false\n\n\t\tupdateCamera(LocalPlayer)\n\tend\nend)"
LocalScript1.Parent = Spectate

local ListTemplate = Instance.new("TextButton")
ListTemplate.Name = "ListTemplate"
ListTemplate.Size = UDim2.new(1, 0, 0, 35)
ListTemplate.BorderColor3 = Color3.fromRGB(0, 0, 0)
ListTemplate.BorderSizePixel = 0
ListTemplate.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
ListTemplate.FontSize = Enum.FontSize.Size14
ListTemplate.TextSize = 14
ListTemplate.TextColor3 = Color3.fromRGB(0, 0, 0)
ListTemplate.Text = "Placeholder"
ListTemplate.TextWrapped = true
ListTemplate.TextWrap = true
ListTemplate.Font = Enum.Font.SourceSans
ListTemplate.TextScaled = true
ListTemplate.Parent = LocalScript1

Spectate.Parent = game.Players.LocalPlayer.PlayerGui
